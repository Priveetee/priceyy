module.exports=[73972,e=>{"use strict";let t;e.s(["handler",()=>tL,"patchFetch",()=>tq,"routeModule",()=>tM,"serverHooks",()=>tk,"workAsyncStorage",()=>tU,"workUnitAsyncStorage",()=>tC],73972);var r,n,o=e.i(47909),a=e.i(74017),l=e.i(96250),i=e.i(59756),u=e.i(61916),s=e.i(69741),c=e.i(16795),d=e.i(87718),p=e.i(95169),f=e.i(47587),y=e.i(66012),h=e.i(70101),m=e.i(74838),v=e.i(10372),E=e.i(93695);e.i(52474);var w=e.i(220);e.s(["GET",()=>tD,"POST",()=>tD],62307);let _={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,PAYMENT_REQUIRED:-32002,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,PRECONDITION_REQUIRED:-32028,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},b={[-32700]:"PARSE_ERROR",[-32600]:"BAD_REQUEST",[-32603]:"INTERNAL_SERVER_ERROR",[-32001]:"UNAUTHORIZED",[-32002]:"PAYMENT_REQUIRED",[-32003]:"FORBIDDEN",[-32004]:"NOT_FOUND",[-32005]:"METHOD_NOT_SUPPORTED",[-32008]:"TIMEOUT",[-32009]:"CONFLICT",[-32012]:"PRECONDITION_FAILED",[-32013]:"PAYLOAD_TOO_LARGE",[-32015]:"UNSUPPORTED_MEDIA_TYPE",[-32022]:"UNPROCESSABLE_CONTENT",[-32028]:"PRECONDITION_REQUIRED",[-32029]:"TOO_MANY_REQUESTS",[-32099]:"CLIENT_CLOSED_REQUEST"};function g(e,...t){let r=Object.assign(Object.create(null),e);for(let e of t)for(let t in e){if(t in r&&r[t]!==e[t])throw Error(`Duplicate key ${t}`);r[t]=e[t]}return r}function O(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function R(e){return"function"==typeof e}function x(e){return Object.assign(Object.create(null),e)}_.BAD_GATEWAY,_.SERVICE_UNAVAILABLE,_.GATEWAY_TIMEOUT,_.INTERNAL_SERVER_ERROR;let S="function"==typeof Symbol&&!!Symbol.asyncIterator;function T(e){return S&&O(e)&&Symbol.asyncIterator in e}let P=e=>e();function j(e){return e}var A=Object.create,N=Object.defineProperty,D=Object.getOwnPropertyDescriptor,I=Object.getOwnPropertyNames,M=Object.getPrototypeOf,U=Object.prototype.hasOwnProperty,C=(e,t)=>function(){return t||(0,e[I(e)[0]])((t={exports:{}}).exports,t),t.exports},k=(e,t,r)=>(r=null!=e?A(M(e)):{},((e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(var o,a=I(t),l=0,i=a.length;l<i;l++)o=a[l],U.call(e,o)||o===r||N(e,o,{get:(e=>t[e]).bind(null,o),enumerable:!(n=D(t,o))||n.enumerable});return e})(!t&&e&&e.__esModule?r:N(r,"default",{value:e,enumerable:!0}),e));let q=()=>{},L=e=>{Object.freeze&&Object.freeze(e)},$={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504};function B(e){var t;return null!=(t=$[e])?t:500}var F=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/typeof.js"(e,t){function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}}),H=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPrimitive.js"(e,t){var r=F().default;t.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports}}),z=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/toPropertyKey.js"(e,t){var r=F().default,n=H();t.exports=function(e){var t=n(e,"string");return"symbol"==r(t)?t:t+""},t.exports.__esModule=!0,t.exports.default=t.exports}}),Y=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/defineProperty.js"(e,t){var r=z();t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports}}),G=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectSpread2.js"(e,t){var r=Y();function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}t.exports=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach(function(t){r(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e},t.exports.__esModule=!0,t.exports.default=t.exports}}),Q=k(G(),1);function V(e){let{path:t,error:r,config:n}=e,{code:o}=e.error,a={message:r.message,code:_[o],data:{code:o,httpStatus:B(r.code)}};return n.isDev&&"string"==typeof e.error.stack&&(a.data.stack=e.error.stack),"string"==typeof t&&(a.data.path=t),n.errorFormatter((0,Q.default)((0,Q.default)({},e),{},{shape:a}))}let W=({shape:e})=>e;var J=k(Y(),1),K=class extends Error{};function X(e){if(e instanceof Z||e instanceof Error&&"TRPCError"===e.name)return e;let t=new Z({code:"INTERNAL_SERVER_ERROR",cause:e});return e instanceof Error&&e.stack&&(t.stack=e.stack),t}var Z=class extends Error{constructor(e){var t,r;let n=function(e){if(e instanceof Error)return e;let t=typeof e;if("undefined"!==t&&"function"!==t&&null!==e){if("object"!==t)return Error(String(e));if(O(e))return Object.assign(new K,e)}}(e.cause);super(null!=(t=null!=(r=e.message)?r:null==n?void 0:n.message)?t:e.code,{cause:n}),(0,J.default)(this,"cause",void 0),(0,J.default)(this,"code",void 0),this.code=e.code,this.name="TRPCError",null!=this.cause||(this.cause=n)}},ee=k(G(),1);let et={input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}};function er(e,t){return"error"in t?(0,ee.default)((0,ee.default)({},t),{},{error:e.transformer.output.serialize(t.error)}):"data"in t.result?(0,ee.default)((0,ee.default)({},t),{},{result:(0,ee.default)((0,ee.default)({},t.result),{},{data:e.transformer.output.serialize(t.result.data)})}):t}function en(e,t){return Array.isArray(t)?t.map(t=>er(e,t)):er(e,t)}var eo=k(G(),1);let ea={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:W,transformer:et},el=["then","call","apply"];function ei(e){return function(t){let r=new Set(Object.keys(t).filter(e=>el.includes(e)));if(r.size>0)throw Error("Reserved words used in `router({})` call: "+Array.from(r).join(", "));let n=x({}),o=x({}),a=function e(t,r=[]){let a=x({});for(let[l,i]of Object.entries(null!=t?t:{})){if("function"==typeof i&&"lazyMarker"in i){o[[...r,l].join(".")]=function t(r){return{ref:r.ref,load:function(e){let t=Symbol(),r=t;return()=>(r===t&&(r=e()),r)}(async()=>{let n=await r.ref(),a=[...r.path,r.key],l=a.join(".");for(let[i,u]of(r.aggregate[r.key]=e(n._def.record,a),delete o[l],Object.entries(n._def.lazy)))o[[...a,i].join(".")]=t({ref:u.ref,path:a,key:i,aggregate:r.aggregate[r.key]})})}}({path:r,ref:i,key:l,aggregate:a});continue}if(O(i)&&O(i._def)&&"router"in i._def){a[l]=e(i._def.record,[...r,l]);continue}if("function"!=typeof i){a[l]=e(i,[...r,l]);continue}let t=[...r,l].join(".");if(n[t])throw Error(`Duplicate key: ${t}`);n[t]=i,a[l]=i}return a}(t),l=(0,eo.default)((0,eo.default)({_config:e,router:!0,procedures:n,lazy:o},ea),{},{record:a});return(0,eo.default)((0,eo.default)({},a),{},{_def:l,createCaller:es()({_def:l})})}}async function eu(e,t){let{_def:r}=e,n=r.procedures[t];for(;!n;){let e=Object.keys(r.lazy).find(e=>t.startsWith(e));if(!e)return null;let o=r.lazy[e];await o.load(),n=r.procedures[t]}return n}function es(){return function(e){let{_def:t}=e;return function(r,n){return function e(t,r,n){let o=r.join(".");return null!=n[o]||(n[o]=new Proxy(q,{get(o,a){if("string"==typeof a&&"then"!==a)return e(t,[...r,a],n)},apply(e,n,o){let a=r[r.length-1],l={args:o,path:r};return"call"===a?l={args:o.length>=2?[o[1]]:[],path:r.slice(0,-1)}:"apply"===a&&(l={args:o.length>=2?o[1]:[],path:r.slice(0,-1)}),L(l.args),L(l.path),t(l)}})),n[o]}(async o=>{let a,{path:l,args:i}=o,u=l.join(".");if(1===l.length&&"_def"===l[0])return t;let s=await eu(e,u);try{if(!s)throw new Z({code:"NOT_FOUND",message:`No procedure found on path "${l}"`});return a=R(r)?await Promise.resolve(r()):r,await s({path:u,getRawInput:async()=>i[0],ctx:a,type:s._def.type,signal:null==n?void 0:n.signal})}catch(e){var c,d;throw null==n||null==(c=n.onError)||c.call(n,{ctx:a,error:X(e),input:i[0],path:u,type:null!=(d=null==s?void 0:s._def.type)?d:"unknown"}),e}},[],Object.create(null))}}}function ec(...e){var t;let r=g({},...e.map(e=>e._def.record));return ei({errorFormatter:e.reduce((e,t)=>{if(t._def._config.errorFormatter&&t._def._config.errorFormatter!==W){if(e!==W&&e!==t._def._config.errorFormatter)throw Error("You seem to have several error formatters");return t._def._config.errorFormatter}return e},W),transformer:e.reduce((e,t)=>{if(t._def._config.transformer&&t._def._config.transformer!==et){if(e!==et&&e!==t._def._config.transformer)throw Error("You seem to have several transformers");return t._def._config.transformer}return e},et),isDev:e.every(e=>e._def._config.isDev),allowOutsideOfServer:e.every(e=>e._def._config.allowOutsideOfServer),isServer:e.every(e=>e._def._config.isServer),$types:null==(t=e[0])?void 0:t._def._config.$types})(r)}let ed=Symbol();function ep(e){return"object"==typeof e&&null!==e&&"subscribe"in e}function ef(e,t){let r=(function(e,t){let r=null,n=()=>{null==r||r.unsubscribe(),r=null,t.removeEventListener("abort",n)};return new ReadableStream({start(o){r=e.subscribe({next(e){o.enqueue({ok:!0,value:e})},error(e){o.enqueue({ok:!1,error:e}),o.close()},complete(){o.close()}}),t.aborted?n():t.addEventListener("abort",n,{once:!0})},cancel(){n()}})})(e,t).getReader(),n={async next(){let e=await r.read();if(e.done)return{value:void 0,done:!0};let{value:t}=e;if(!t.ok)throw t.error;return{value:t.value,done:!1}},return:async()=>(await r.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>n}}var ey=k(G(),1);function eh(e){let t=null,r=Symbol.for("@trpc/server/http/memo"),n=r;return{read:async()=>(n!==r||(null!=t||(t=e().catch(e=>{if(e instanceof Z)throw e;throw new Z({code:"BAD_REQUEST",message:e instanceof Error?e.message:"Invalid input",cause:e})})),n=await t,t=null),n),result:()=>n!==r?n:void 0}}let em={isMatch(e){var t;return!!(null==(t=e.headers.get("content-type"))?void 0:t.startsWith("application/json"))},async parse(e){var t;let{req:r}=e,n="1"===e.searchParams.get("batch"),o=n?e.path.split(","):[e.path],a=eh(async()=>{let t;if("GET"===r.method){let r=e.searchParams.get("input");r&&(t=JSON.parse(r))}else t=await r.json();if(void 0===t)return{};if(!n)return{0:e.router._def._config.transformer.input.deserialize(t)};if(!O(t))throw new Z({code:"BAD_REQUEST",message:'"input" needs to be an object when doing a batch call'});let a={};for(let r of o.keys()){let n=t[r];void 0!==n&&(a[r]=e.router._def._config.transformer.input.deserialize(n))}return a}),l=await Promise.all(o.map(async(t,r)=>{let n=await eu(e.router,t);return{path:t,procedure:n,getRawInput:async()=>{let t=(await a.read())[r];if((null==n?void 0:n._def.type)==="subscription"){var o,l;let r=null!=(o=null!=(l=e.headers.get("last-event-id"))?l:e.searchParams.get("lastEventId"))?o:e.searchParams.get("Last-Event-Id");r&&(O(t)?t=(0,ey.default)((0,ey.default)({},t),{},{lastEventId:r}):null!=t||(t={lastEventId:r}))}return t},result:()=>{var e;return null==(e=a.result())?void 0:e[r]}}})),i=new Set(l.map(e=>{var t;return null==(t=e.procedure)?void 0:t._def.type}).filter(Boolean));if(i.size>1)throw new Z({code:"BAD_REQUEST",message:`Cannot mix procedure types in call: ${Array.from(i).join(", ")}`});let u=null!=(t=i.values().next().value)?t:"unknown",s=e.searchParams.get("connectionParams");return{isBatchCall:n,accept:r.headers.get("trpc-accept"),calls:l,type:u,connectionParams:null===s?null:function(e){let t;try{t=JSON.parse(e)}catch(e){throw new Z({code:"PARSE_ERROR",message:"Not JSON-parsable query params",cause:e})}var r=t;try{if(null===r)return null;if(!O(r))throw Error("Expected object");let e=Object.entries(r).filter(([e,t])=>"string"!=typeof t);if(e.length>0)throw Error(`Expected connectionParams to be string values. Got ${e.map(([e,t])=>`${e}: ${typeof t}`).join(", ")}`);return r}catch(e){throw new Z({code:"PARSE_ERROR",message:"Invalid connection params shape",cause:e})}}(s),signal:r.signal,url:e.url}}},ev=[em,{isMatch(e){var t;return!!(null==(t=e.headers.get("content-type"))?void 0:t.startsWith("multipart/form-data"))},async parse(e){let{req:t}=e;if("POST"!==t.method)throw new Z({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for multipart/form-data requests"});let r=eh(async()=>await t.formData()),n=await eu(e.router,e.path);return{accept:null,calls:[{path:e.path,getRawInput:r.read,result:r.result,procedure:n}],isBatchCall:!1,type:"mutation",connectionParams:null,signal:t.signal,url:e.url}}},{isMatch(e){var t;return!!(null==(t=e.headers.get("content-type"))?void 0:t.startsWith("application/octet-stream"))},async parse(e){let{req:t}=e;if("POST"!==t.method)throw new Z({code:"METHOD_NOT_SUPPORTED",message:"Only POST requests are supported for application/octet-stream requests"});let r=eh(async()=>t.body);return{calls:[{path:e.path,getRawInput:r.read,result:r.result,procedure:await eu(e.router,e.path)}],isBatchCall:!1,accept:null,type:"mutation",connectionParams:null,signal:t.signal,url:e.url}}}];async function eE(e){let t=function(e){let t=ev.find(t=>t.isMatch(e));if(t)return t;if(!t&&"GET"===e.method)return em;throw new Z({code:"UNSUPPORTED_MEDIA_TYPE",message:e.headers.has("content-type")?`Unsupported content-type "${e.headers.get("content-type")}`:"Missing content-type header"})}(e.req);return await t.parse(e)}function ew(e="AbortError"){throw new DOMException(e,"AbortError")}function e_(e){return"[object Object]"===Object.prototype.toString.call(e)}var eb=k(Y(),1);let eg=new WeakMap,eO=()=>{};t=Symbol.toStringTag;var eR=class e{constructor(e){(0,eb.default)(this,"promise",void 0),(0,eb.default)(this,"subscribers",[]),(0,eb.default)(this,"settlement",null),(0,eb.default)(this,t,"Unpromise"),"function"==typeof e?this.promise=new Promise(e):this.promise=e;let r=this.promise.then(e=>{let{subscribers:t}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:e},null==t||t.forEach(({resolve:t})=>{t(e)})});"catch"in r&&r.catch(e=>{let{subscribers:t}=this;this.subscribers=null,this.settlement={status:"rejected",reason:e},null==t||t.forEach(({reject:t})=>{t(e)})})}subscribe(){let e,t,{settlement:r}=this;if(null===r){var n;let r,o;if(null===this.subscribers)throw Error("Unpromise settled but still has subscribers");let a={promise:new Promise((e,t)=>{r=e,o=t}),resolve:r,reject:o};this.subscribers=(n=this.subscribers,[...n,a]),e=a.promise,t=()=>{null!==this.subscribers&&(this.subscribers=function(e,t){let r=e.indexOf(t);if(-1!==r)return[...e.slice(0,r),...e.slice(r+1)];return e}(this.subscribers,a))}}else{let{status:n}=r;e="fulfilled"===n?Promise.resolve(r.value):Promise.reject(r.reason),t=eO}return Object.assign(e,{unsubscribe:t})}then(e,t){let r=this.subscribe(),{unsubscribe:n}=r;return Object.assign(r.then(e,t),{unsubscribe:n})}catch(e){let t=this.subscribe(),{unsubscribe:r}=t;return Object.assign(t.catch(e),{unsubscribe:r})}finally(e){let t=this.subscribe(),{unsubscribe:r}=t;return Object.assign(t.finally(e),{unsubscribe:r})}static proxy(t){let r=e.getSubscribablePromise(t);return void 0!==r?r:e.createSubscribablePromise(t)}static createSubscribablePromise(t){let r=new e(t);return eg.set(t,r),eg.set(r,r),r}static getSubscribablePromise(e){return eg.get(e)}static resolve(t){let r="object"==typeof t&&null!==t&&"then"in t&&"function"==typeof t.then?t:Promise.resolve(t);return e.proxy(r).subscribe()}static async any(t){let r=(Array.isArray(t)?t:[...t]).map(e.resolve);try{return await Promise.any(r)}finally{r.forEach(({unsubscribe:e})=>{e()})}}static async race(t){let r=(Array.isArray(t)?t:[...t]).map(e.resolve);try{return await Promise.race(r)}finally{r.forEach(({unsubscribe:e})=>{e()})}}static async raceReferences(e){let t=e.map(ex);try{return await Promise.race(t)}finally{for(let e of t)e.unsubscribe()}}};function ex(e){return eR.proxy(e).then(()=>[e])}function eS(e,t){let r=e[Symbol.asyncDispose];return e[Symbol.asyncDispose]=async()=>{await t(),await (null==r?void 0:r())},e}null!=(r=Symbol).dispose||(r.dispose=Symbol()),null!=(n=Symbol).asyncDispose||(n.asyncDispose=Symbol());let eT=Symbol();function eP(e){let t=null;return function(e,t){let r=e[Symbol.dispose];return e[Symbol.dispose]=()=>{t(),null==r||r()},e}({start(){if(t)throw Error("Timer already started");return new Promise(r=>{t=setTimeout(()=>r(eT),e)})}},()=>{t&&clearTimeout(t)})}var ej=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/usingCtx.js"(e,t){t.exports=function(){var e="function"==typeof SuppressedError?SuppressedError:function(e,t){var r=Error();return r.name="SuppressedError",r.error=e,r.suppressed=t,r},t={},r=[];function n(e,t){if(null!=t){if(Object(t)!==t)throw TypeError("using declarations can only be used with objects, functions, null, or undefined.");if(e)var n=t[Symbol.asyncDispose||Symbol.for("Symbol.asyncDispose")];if(void 0===n&&(n=t[Symbol.dispose||Symbol.for("Symbol.dispose")],e))var o=n;if("function"!=typeof n)throw TypeError("Object is not disposable.");o&&(n=function(){try{o.call(t)}catch(e){return Promise.reject(e)}}),r.push({v:t,d:n,a:e})}else e&&r.push({d:t,a:e});return t}return{e:t,u:n.bind(null,!1),a:n.bind(null,!0),d:function(){var n,o=this.e,a=0;function l(){for(;n=r.pop();)try{if(!n.a&&1===a)return a=0,r.push(n),Promise.resolve().then(l);if(n.d){var e=n.d.call(n.v);if(n.a)return a|=2,Promise.resolve(e).then(l,i)}else a|=1}catch(e){return i(e)}if(1===a)return o!==t?Promise.reject(o):Promise.resolve();if(o!==t)throw o}function i(r){return o=o!==t?new e(r,o):r,l()}return l()}}},t.exports.__esModule=!0,t.exports.default=t.exports}}),eA=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/OverloadYield.js"(e,t){t.exports=function(e,t){this.v=e,this.k=t},t.exports.__esModule=!0,t.exports.default=t.exports}}),eN=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/awaitAsyncGenerator.js"(e,t){var r=eA();t.exports=function(e){return new r(e,0)},t.exports.__esModule=!0,t.exports.default=t.exports}}),eD=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/wrapAsyncGenerator.js"(e,t){var r=eA();function n(e){var t,n;function o(t,n){try{var l=e[t](n),i=l.value,u=i instanceof r;Promise.resolve(u?i.v:i).then(function(r){if(u){var n="return"===t?"return":"next";if(!i.k||r.done)return o(n,r);r=e[n](r).value}a(l.done?"return":"normal",r)},function(e){o("throw",e)})}catch(e){a("throw",e)}}function a(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?o(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(a,l){var i={key:e,arg:r,resolve:a,reject:l,next:null};n?n=n.next=i:(t=n=i,o(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}n.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)},t.exports=function(e){return function(){return new n(e.apply(this,arguments))}},t.exports.__esModule=!0,t.exports.default=t.exports}}),eI=k(ej(),1),eM=k(eN(),1),eU=k(eD(),1);function eC(e){let t=e[Symbol.asyncIterator]();return t[Symbol.asyncDispose]?t:eS(t,async()=>{var e;await (null==(e=t.return)?void 0:e.call(t))})}function ek(){return(ek=(0,eU.default)(function*(e,t){try{let n;var r=(0,eI.default)();let o=r.a(eC(e)),a=r.u(eP(t.maxDurationMs)).start();for(;;){if((n=yield(0,eM.default)(eR.race([o.next(),a])))===eT&&ew(),n.done)return n;yield n.value,n=null}}catch(e){r.e=e}finally{yield(0,eM.default)(r.d())}})).apply(this,arguments)}function eq(){return(eq=(0,eU.default)(function*(e,t){try{let n;var r=(0,eI.default)();let o=r.a(eC(e)),a=r.u(eP(t.gracePeriodMs)),l=t.count,i=new Promise(()=>{});for(;;){if((n=yield(0,eM.default)(eR.race([o.next(),i])))===eT&&ew(),n.done)return n.value;yield n.value,0==--l&&(i=a.start()),n=null}}catch(e){r.e=e}finally{yield(0,eM.default)(r.d())}})).apply(this,arguments)}function eL(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}}var e$=k(ej(),1),eB=k(eN(),1),eF=k(eD(),1);function eH(e){let t=e[Symbol.asyncIterator]();return new ReadableStream({async cancel(){var e;await (null==(e=t.return)?void 0:e.call(t))},async pull(e){let r=await t.next();if(r.done)return void e.close();e.enqueue(r.value)}})}var ez=k(ej(),1),eY=k(eN(),1),eG=k(eD(),1);let eQ=Symbol("ping");function eV(e,t){return eW.apply(this,arguments)}function eW(){return(eW=(0,eG.default)(function*(e,t){try{let o;var r=(0,ez.default)();let a=r.a(eC(e)),l=a.next();for(;;)try{var n=(0,ez.default)();let e=n.u(eP(t));if((o=yield(0,eY.default)(eR.race([l,e.start()])))===eT){yield eQ;continue}if(o.done)return o.value;l=a.next(),yield o.value,o=null}catch(e){n.e=e}finally{n.d()}}catch(e){r.e=e}finally{yield(0,eY.default)(r.d())}})).apply(this,arguments)}var eJ=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/asyncIterator.js"(e,t){function r(e){function t(e){if(Object(e)!==e)return Promise.reject(TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return(r=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var r=this.s.return;return void 0===r?Promise.resolve({value:e,done:!0}):t(r.apply(this.s,arguments))},throw:function(e){var r=this.s.return;return void 0===r?Promise.reject(e):t(r.apply(this.s,arguments))}},new r(e)}t.exports=function(e){var t,n,o,a=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,o=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(o&&null!=(t=e[o]))return new r(t.call(e));n="@@asyncIterator",o="@@iterator"}throw TypeError("Object is not async iterable")},t.exports.__esModule=!0,t.exports.default=t.exports}}),eK=k(eN(),1),eX=k(eD(),1),eZ=k(ej(),1),e0=k(eJ(),1);function e1(e){return(O(e)||R(e))&&"function"==typeof(null==e?void 0:e.then)&&"function"==typeof(null==e?void 0:e.catch)}var e2=class extends Error{constructor(e){super("Max depth reached at path: "+e.join(".")),this.path=e}};function e3(){return(e3=(0,eX.default)(function*(e){let{data:t}=e,r=0,n=function(){let e="idle",t=eL(),r=[],n=new Set,o=[];function a(r){if("pending"!==e)return;let a=function(e,t){let r=e[Symbol.asyncIterator](),n="idle";function o(){n="done",t=()=>{}}return{pull:function(){"idle"===n&&(n="pending",r.next().then(e=>{if(e.done){n="done",t({status:"return",value:e.value}),o();return}n="idle",t({status:"yield",value:e.value})}).catch(e=>{t({status:"error",error:e}),o()}))},destroy:async()=>{var e;o(),await (null==(e=r.return)?void 0:e.call(r))}}}(r,r=>{if("pending"===e){switch(r.status){case"yield":o.push([a,r]);break;case"return":n.delete(a);break;case"error":o.push([a,r]),n.delete(a)}t.resolve()}});n.add(a),a.pull()}return{add(t){switch(e){case"idle":r.push(t);break;case"pending":a(t)}},[Symbol.asyncIterator]:()=>(0,eF.default)(function*(){try{var l=(0,e$.default)();if("idle"!==e)throw Error("Cannot iterate twice");for(e="pending",l.a(eS({},async()=>{e="done";let r=[];if(await Promise.all(Array.from(n.values()).map(async e=>{try{await e.destroy()}catch(e){r.push(e)}})),o.length=0,n.clear(),t.resolve(),r.length>0)throw AggregateError(r)}));r.length>0;)a(r.shift());for(;n.size>0;){for(yield(0,eB.default)(t.promise);o.length>0;){let[e,t]=o.shift();switch(t.status){case"yield":yield t.value,e.pull();break;case"error":throw t.error}}t=eL()}}catch(e){l.e=e}finally{yield(0,eB.default)(l.d())}})()}}();function o(e){let t=r++,o=e(t);return n.add(o),t}function a(t){return e.maxDepth&&t.length>e.maxDepth?new e2(t):null}function l(t,r){var n,l,u;if(e1(t))return[0,(n=t,o((l=(0,eX.default)(function*(t){let o=a(r);o&&(n.catch(t=>{var n;null==(n=e.onError)||n.call(e,{error:t,path:r})}),n=Promise.reject(o));try{let e=yield(0,eK.default)(n);yield[t,0,i(e,r)]}catch(n){var l,u;null==(l=e.onError)||l.call(e,{error:n,path:r}),yield[t,1,null==(u=e.formatError)?void 0:u.call(e,{error:n,path:r})]}}),function(e){return l.apply(this,arguments)})))];if(T(t)){if(e.maxDepth&&r.length>=e.maxDepth)throw Error("Max depth reached");return[1,o((u=(0,eX.default)(function*(n){try{var o,l,u=(0,eZ.default)();let s=a(r);if(s)throw s;let c=u.a(eC(t));try{for(;;){let e=yield(0,eK.default)(c.next());if(e.done){yield[n,0,i(e.value,r)];break}yield[n,1,i(e.value,r)]}}catch(t){null==(o=e.onError)||o.call(e,{error:t,path:r}),yield[n,2,null==(l=e.formatError)?void 0:l.call(e,{error:t,path:r})]}}catch(e){u.e=e}finally{yield(0,eK.default)(u.d())}}),function(e){return u.apply(this,arguments)}))]}return null}function i(e,t){var r,n;if(void 0===e)return[[]];let o=l(e,t);if(o)return[[0],[null,...o]];if(!1===e_(e)||void 0!==(r=e.constructor)&&(!1===e_(n=r.prototype)||!1===n.hasOwnProperty("isPrototypeOf")))return[[e]];let a={},i=[];for(let[r,n]of Object.entries(e)){let e=l(n,[...t,r]);if(!e){a[r]=n;continue}a[r]=0,i.push([r,...e])}return[[a],...i]}let u={};for(let[e,r]of Object.entries(t))u[e]=i(r,[e]);yield u;let s=n;e.pingMs&&(s=eV(n,e.pingMs));var c=!1,d=!1;try{for(var p,f,y=(0,e0.default)(s);c=!(f=yield(0,eK.default)(y.next())).done;c=!1){let e=f.value;yield e}}catch(e){d=!0,p=e}finally{try{c&&null!=y.return&&(yield(0,eK.default)(y.return()))}finally{if(d)throw p}}})).apply(this,arguments)}var e7=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/asyncGeneratorDelegate.js"(e,t){var r=eA();t.exports=function(e){var t={},n=!1;function o(t,o){return n=!0,{done:!1,value:new r(o=new Promise(function(r){r(e[t](o))}),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):o("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return o("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):o("return",e)}),t},t.exports.__esModule=!0,t.exports.default=t.exports}}),e4=k(eJ(),1),e9=k(eN(),1),e5=k(eD(),1),e6=k(e7(),1);k(ej(),1);let e8={"Content-Type":"text/event-stream","Cache-Control":"no-cache, no-transform","X-Accel-Buffering":"no",Connection:"keep-alive"};var te=k(eD(),1),tt=k(G(),1);function tr(e){return P((0,te.default)(function*(){throw e}))}let tn={mutation:["POST"],query:["GET"],subscription:["GET"]},to={mutation:["POST"],query:["GET","POST"],subscription:["GET","POST"]};function ta(e){var t,r,n;let{ctx:o,info:a,responseMeta:l,untransformedJSON:i,errors:u=[],headers:s}=e,c=i?function(e){let t=new Set((Array.isArray(e)?e:[e]).map(e=>{if("error"in e&&O(e.error.data)){var t;return"number"==typeof(null==(t=e.error.data)?void 0:t.httpStatus)?e.error.data.httpStatus:B(b[e.error.code])}return 200}));return 1!==t.size?207:t.values().next().value}(i):200,d=!i,p=d?[]:Array.isArray(i)?i:[i],f=null!=(t=null==l?void 0:l({ctx:o,info:a,paths:null==a?void 0:a.calls.map(e=>e.path),data:p,errors:u,eagerGeneration:d,type:null!=(r=null==a||null==(n=a.calls.find(e=>{var t;return null==(t=e.procedure)?void 0:t._def.type}))||null==(n=n.procedure)?void 0:n._def.type)?r:"unknown"}))?t:{};if(f.headers)if(f.headers instanceof Headers)for(let[e,t]of f.headers.entries())s.append(e,t);else for(let[e,t]of Object.entries(f.headers))if(Array.isArray(t))for(let r of t)s.append(e,r);else"string"==typeof t&&s.set(e,t);return f.status&&(c=f.status),{status:c}}function tl(e){return!!O(e)&&(!!T(e)||Object.values(e).some(e1)||Object.values(e).some(T))}async function ti(e){var t,r,n,o,a,l,i;let{router:u,req:s}=e,c=new Headers([["vary","trpc-accept"]]),d=u._def._config,p=new URL(s.url);if("HEAD"===s.method)return new Response(null,{status:204});let f=null==(t=null!=(r=e.allowBatching)?r:null==(n=e.batching)?void 0:n.enabled)||t,y=null!=(o=e.allowMethodOverride)&&o&&"POST"===s.method,h=await P(async()=>{try{return[void 0,await eE({req:s,path:decodeURIComponent(e.path),router:u,searchParams:p.searchParams,headers:e.req.headers,url:p})]}catch(e){return[X(e),void 0]}}),m=P(()=>{let t;return{valueOrUndefined:()=>{if(t)return t[1]},value:()=>{let[e,r]=t;if(e)throw e;return r},create:async r=>{if(t)throw Error("This should only be called once - report a bug in tRPC");try{let n=await e.createContext({info:r});t=[void 0,n]}catch(e){t=[X(e),void 0]}}}}),v=y?to:tn,E="application/jsonl"===s.headers.get("trpc-accept"),w=null==(a=null==(l=d.sse)?void 0:l.enabled)||a;try{let[t,r]=h;if(t)throw t;if(r.isBatchCall&&!f)throw new Z({code:"BAD_REQUEST",message:"Batching is not enabled on the server"});if(E&&!r.isBatchCall)throw new Z({message:"Streaming requests must be batched (you can do a batch of 1)",code:"BAD_REQUEST"});await m.create(r);let n=r.calls.map(async t=>{let n=t.procedure;try{if(e.error)throw e.error;if(!n)throw new Z({code:"NOT_FOUND",message:`No procedure found on path "${t.path}"`});if(!v[n._def.type].includes(s.method))throw new Z({code:"METHOD_NOT_SUPPORTED",message:`Unsupported ${s.method}-request to ${n._def.type} procedure at path "${t.path}"`});if("subscription"===n._def.type&&r.isBatchCall)throw new Z({code:"BAD_REQUEST",message:"Cannot batch subscription calls"});let o=await n({path:t.path,getRawInput:t.getRawInput,ctx:m.value(),type:n._def.type,signal:e.req.signal});return[void 0,{data:o}]}catch(i){var o,a,l;let r=X(i),n=t.result();return null==(o=e.onError)||o.call(e,{error:r,path:t.path,input:n,ctx:m.valueOrUndefined(),type:null!=(a=null==(l=t.procedure)?void 0:l._def.type)?a:"unknown",req:e.req}),[r,void 0]}});if(!r.isBatchCall){let[t]=r.calls,[o,a]=await n[0];switch(r.type){case"unknown":case"mutation":case"query":{if(c.set("content-type","application/json"),tl(null==a?void 0:a.data))throw new Z({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"});let n=o?{error:V({config:d,ctx:m.valueOrUndefined(),error:o,input:t.result(),path:t.path,type:r.type})}:{result:{data:a.data}},l=ta({ctx:m.valueOrUndefined(),info:r,responseMeta:e.responseMeta,errors:o?[o]:[],headers:c,untransformedJSON:[n]});return new Response(JSON.stringify(en(d,n)),{status:l.status,headers:c})}case"subscription":{let n=P(()=>o?tr(o):w?ep(a.data)||T(a.data)?ep(a.data)?ef(a.data,e.req.signal):a.data:tr(new Z({message:`Subscription ${t.path} did not return an observable or a AsyncGenerator`,code:"INTERNAL_SERVER_ERROR"})):tr(new Z({code:"METHOD_NOT_SUPPORTED",message:'Missing experimental flag "sseSubscriptions"'}))),l=function(e){var t,r,n,o,a;let{serialize:l=j}=e,i={enabled:null!=(t=null==(r=e.ping)?void 0:r.enabled)&&t,intervalMs:null!=(n=null==(o=e.ping)?void 0:o.intervalMs)?n:1e3},u=null!=(a=e.client)?a:{};if(i.enabled&&u.reconnectAfterInactivityMs&&i.intervalMs>u.reconnectAfterInactivityMs)throw Error(`Ping interval must be less than client reconnect interval to prevent unnecessary reconnection - ping.intervalMs: ${i.intervalMs} client.reconnectAfterInactivityMs: ${u.reconnectAfterInactivityMs}`);function s(){return(s=(0,e5.default)(function*(){let t,r;yield{event:"connected",data:JSON.stringify(u)};let n=e.data;e.emitAndEndImmediately&&(n=function(e,t){return eq.apply(this,arguments)}(n,{count:1,gracePeriodMs:1})),e.maxDurationMs&&e.maxDurationMs>0&&e.maxDurationMs!==1/0&&(n=function(e,t){return ek.apply(this,arguments)}(n,{maxDurationMs:e.maxDurationMs})),i.enabled&&i.intervalMs!==1/0&&i.intervalMs>0&&(n=eV(n,i.intervalMs));var o=!1,a=!1;try{for(var s,c,d,p=(0,e4.default)(n);o=!(d=yield(0,e9.default)(p.next())).done;o=!1){if((t=d.value)===eQ){yield{event:"ping",data:""};continue}(s=t,r=Array.isArray(s)&&s[2]===ed?{id:t[0],data:t[1]}:{data:t}).data=JSON.stringify(l(r.data)),yield r,t=null,r=null}}catch(e){a=!0,c=e}finally{try{o&&null!=p.return&&(yield(0,e9.default)(p.return()))}finally{if(a)throw c}}})).apply(this,arguments)}function c(){return(c=(0,e5.default)(function*(){try{yield*(0,e6.default)((0,e4.default)(function(){return s.apply(this,arguments)}())),yield{event:"return",data:""}}catch(a){var t,r;if(O(a)&&"AbortError"===a.name)return;let n=X(a),o=null!=(t=null==(r=e.formatError)?void 0:r.call(e,{error:n}))?t:null;yield{event:"serialized-error",data:JSON.stringify(l(o))}}})).apply(this,arguments)}return eH(function(){return c.apply(this,arguments)}()).pipeThrough(new TransformStream({transform(e,t){"event"in e&&t.enqueue(`event: ${e.event}
`),"data"in e&&t.enqueue(`data: ${e.data}
`),"id"in e&&t.enqueue(`id: ${e.id}
`),"comment"in e&&t.enqueue(`: ${e.comment}
`),t.enqueue("\n\n")}})).pipeThrough(new TextEncoderStream)}((0,tt.default)((0,tt.default)({},d.sse),{},{data:n,serialize:e=>d.transformer.output.serialize(e),formatError(r){var n,o,a;let l=X(r.error),i=null==t?void 0:t.result(),u=null==t?void 0:t.path,s=null!=(n=null==t||null==(o=t.procedure)?void 0:o._def.type)?n:"unknown";return null==(a=e.onError)||a.call(e,{error:l,path:u,input:i,ctx:m.valueOrUndefined(),req:e.req,type:s}),V({config:d,ctx:m.valueOrUndefined(),error:l,input:i,path:u,type:s})}}));for(let[e,t]of Object.entries(e8))c.set(e,t);let i=ta({ctx:m.valueOrUndefined(),info:r,responseMeta:e.responseMeta,errors:[],headers:c,untransformedJSON:null});return new Response(l,{headers:c,status:i.status})}}}if("application/jsonl"===r.accept){c.set("content-type","application/json"),c.set("transfer-encoding","chunked");let t=ta({ctx:m.valueOrUndefined(),info:r,responseMeta:e.responseMeta,errors:[],headers:c,untransformedJSON:null}),o=function(e){let t=eH(function(e){return e3.apply(this,arguments)}(e)),{serialize:r}=e;return r&&(t=t.pipeThrough(new TransformStream({transform(e,t){e===eQ?t.enqueue(eQ):t.enqueue(r(e))}}))),t.pipeThrough(new TransformStream({transform(e,t){e===eQ?t.enqueue(" "):t.enqueue(JSON.stringify(e)+"\n")}})).pipeThrough(new TextEncoderStream)}((0,tt.default)((0,tt.default)({},d.jsonl),{},{maxDepth:1/0,data:n.map(async t=>{let[n,o]=await t,a=r.calls[0];if(n){var l,i;return{error:V({config:d,ctx:m.valueOrUndefined(),error:n,input:a.result(),path:a.path,type:null!=(l=null==(i=a.procedure)?void 0:i._def.type)?l:"unknown"})}}let u=ep(o.data)?ef(o.data,e.req.signal):Promise.resolve(o.data);return{result:Promise.resolve({data:u})}}),serialize:e=>d.transformer.output.serialize(e),onError:t=>{var n,o;null==(n=e.onError)||n.call(e,{error:X(t),path:void 0,input:void 0,ctx:m.valueOrUndefined(),req:e.req,type:null!=(o=null==r?void 0:r.type)?o:"unknown"})},formatError(e){var t,n;let o=null==r?void 0:r.calls[e.path[0]],a=X(e.error),l=null==o?void 0:o.result(),i=null==o?void 0:o.path,u=null!=(t=null==o||null==(n=o.procedure)?void 0:n._def.type)?t:"unknown";return V({config:d,ctx:m.valueOrUndefined(),error:a,input:l,path:i,type:u})}}));return new Response(o,{headers:c,status:t.status})}c.set("content-type","application/json");let o=(await Promise.all(n)).map(e=>{let[t,r]=e;return t?e:tl(r.data)?[new Z({code:"UNSUPPORTED_MEDIA_TYPE",message:"Cannot use stream-like response in non-streaming request - use httpBatchStreamLink"}),void 0]:e}),a=o.map(([e,t],n)=>{let o=r.calls[n];if(e){var a,l;return{error:V({config:d,ctx:m.valueOrUndefined(),error:e,input:o.result(),path:o.path,type:null!=(a=null==(l=o.procedure)?void 0:l._def.type)?a:"unknown"})}}return{result:{data:t.data}}}),l=o.map(([e])=>e).filter(Boolean),i=ta({ctx:m.valueOrUndefined(),info:r,responseMeta:e.responseMeta,untransformedJSON:a,errors:l,headers:c});return new Response(JSON.stringify(en(d,a)),{status:i.status,headers:c})}catch(u){let[t,r]=h,n=m.valueOrUndefined(),{error:o,untransformedJSON:a,body:l}=function(e,t){let{router:r,req:n,onError:o}=t.opts,a=X(e);null==o||o({error:a,path:t.path,input:t.input,ctx:t.ctx,type:t.type,req:n});let l={error:V({config:r._def._config,error:a,type:t.type,path:t.path,input:t.input,ctx:t.ctx})},i=JSON.stringify(en(r._def._config,l));return{error:a,untransformedJSON:l,body:i}}(u,{opts:e,ctx:m.valueOrUndefined(),type:null!=(i=null==r?void 0:r.type)?i:"unknown"});return new Response(l,{status:ta({ctx:n,info:r,responseMeta:e.responseMeta,untransformedJSON:a,errors:[o],headers:c}).status,headers:c})}}var tu=k(G(),1);let ts=e=>e=(e=e.startsWith("/")?e.slice(1):e).endsWith("/")?e.slice(0,-1):e;async function tc(e){let t=new Headers,r=async r=>{var n;return null==(n=e.createContext)?void 0:n.call(e,(0,tu.default)({req:e.req,resHeaders:t},r))},n=ts(new URL(e.req.url).pathname),o=ts(e.endpoint),a=ts(n.slice(o.length));return await ti((0,tu.default)((0,tu.default)({},e),{},{req:e.req,createContext:r,path:a,error:null,onError(t){var r;null==e||null==(r=e.onError)||r.call(e,(0,tu.default)((0,tu.default)({},t),{},{req:e.req}))},responseMeta(r){var n;let o=null==(n=e.responseMeta)?void 0:n.call(e,r);if(null==o?void 0:o.headers)if(o.headers instanceof Headers)for(let[e,r]of o.headers.entries())t.append(e,r);else for(let[e,r]of Object.entries(o.headers))if(Array.isArray(r))for(let n of r)t.append(e,n);else"string"==typeof r&&t.set(e,r);return{headers:t,status:null==o?void 0:o.status}}}))}var td=e.i(62810),td=td,tp=k(G(),1);let tf="middlewareMarker";var ty=k(Y(),1),th=class extends Error{constructor(e){var t;super(null==(t=e[0])?void 0:t.message),(0,ty.default)(this,"issues",void 0),this.name="SchemaError",this.issues=e}};function tm(e){let t="~standard"in e;if("function"==typeof e&&"function"==typeof e.assert)return e.assert.bind(e);if("function"==typeof e&&!t)return e;if("function"==typeof e.parseAsync)return e.parseAsync.bind(e);if("function"==typeof e.parse)return e.parse.bind(e);if("function"==typeof e.validateSync)return e.validateSync.bind(e);if("function"==typeof e.create)return e.create.bind(e);if("function"==typeof e.assert)return t=>(e.assert(t),t);if(t)return async t=>{let r=await e["~standard"].validate(t);if(r.issues)throw new th(r.issues);return r.value};throw Error("Could not find a validator fn")}var tv=C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectWithoutPropertiesLoose.js"(e,t){t.exports=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r},t.exports.__esModule=!0,t.exports.default=t.exports}}),tE=k(C({"../../node_modules/.pnpm/@oxc-project+runtime@0.72.2/node_modules/@oxc-project/runtime/src/helpers/objectWithoutProperties.js"(e,t){var r=tv();t.exports=function(e,t){if(null==e)return{};var n,o,a=r(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.includes(n)||({}).propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a},t.exports.__esModule=!0,t.exports.default=t.exports}})(),1),tw=k(G(),1);let t_=["middlewares","inputs","meta"];function tb(e,t){let{middlewares:r=[],inputs:n,meta:o}=t,a=(0,tE.default)(t,t_);return tg((0,tw.default)((0,tw.default)({},g(e,a)),{},{inputs:[...e.inputs,...null!=n?n:[]],middlewares:[...e.middlewares,...r],meta:e.meta&&o?(0,tw.default)((0,tw.default)({},e.meta),o):null!=o?o:e.meta}))}function tg(e={}){let t=(0,tw.default)({procedure:!0,inputs:[],middlewares:[]},e);return{_def:t,input(e){let r=tm(e);return tb(t,{inputs:[e],middlewares:[function(e){let t=async function(t){let r,n=await t.getRawInput();try{r=await e(n)}catch(e){throw new Z({code:"BAD_REQUEST",cause:e})}let o=O(t.input)&&O(r)?(0,tp.default)((0,tp.default)({},t.input),r):r;return t.next({input:o})};return t._type="input",t}(r)]})},output(e){let r=tm(e);return tb(t,{output:e,middlewares:[function(e){let t=async function({next:t}){let r=await t();if(!r.ok)return r;try{let t=await e(r.data);return(0,tp.default)((0,tp.default)({},r),{},{data:t})}catch(e){throw new Z({message:"Output validation failed",code:"INTERNAL_SERVER_ERROR",cause:e})}};return t._type="output",t}(r)]})},meta:e=>tb(t,{meta:e}),use:e=>tb(t,{middlewares:"_middlewares"in e?e._middlewares:[e]}),unstable_concat:e=>tb(t,e._def),concat:e=>tb(t,e._def),query:e=>tO((0,tw.default)((0,tw.default)({},t),{},{type:"query"}),e),mutation:e=>tO((0,tw.default)((0,tw.default)({},t),{},{type:"mutation"}),e),subscription:e=>tO((0,tw.default)((0,tw.default)({},t),{},{type:"subscription"}),e),experimental_caller:e=>tb(t,{caller:e})}}function tO(e,t){let r=tb(e,{resolver:t,middlewares:[async function(e){return{marker:tf,ok:!0,data:await t(e),ctx:e.ctx}}]}),n=(0,tw.default)((0,tw.default)({},r._def),{},{type:e.type,experimental_caller:!!r._def.caller,meta:r._def.meta,$types:null}),o=function(e){async function t(t){if(!t||!("getRawInput"in t))throw Error(tR);let r=await tx(0,e,t);if(!r)throw new Z({code:"INTERNAL_SERVER_ERROR",message:"No result from middlewares - did you forget to `return next()`?"});if(!r.ok)throw r.error;return r.data}return t._def=e,t.procedure=!0,t.meta=e.meta,t}(r._def),a=r._def.caller;if(!a)return o;let l=async(...e)=>await a({args:e,invoke:o,_def:n});return l._def=n,l}let tR=`
This is a client-only function.
If you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls
`.trim();async function tx(e,t,r){try{let n=t.middlewares[e];return await n((0,tw.default)((0,tw.default)({},r),{},{meta:t.meta,input:r.input,next(n){var o;return tx(e+1,t,(0,tw.default)((0,tw.default)({},r),{},{ctx:(null==n?void 0:n.ctx)?(0,tw.default)((0,tw.default)({},r.ctx),n.ctx):r.ctx,input:n&&"input"in n?n.input:r.input,getRawInput:null!=(o=null==n?void 0:n.getRawInput)?o:r.getRawInput}))}}))}catch(e){return{ok:!1,error:X(e),marker:tf}}}var tS=k(G(),1);let tT=new class e{context(){return new e}meta(){return new e}create(e){var t,r,n,o,a,l,i,u;let s=(0,tS.default)((0,tS.default)({},e),{},{transformer:"input"in(u=null!=(t=null==e?void 0:e.transformer)?t:et)?u:{input:u,output:u},isDev:null!=(r=null==e?void 0:e.isDev)?r:(null==(n=globalThis.process)?void 0:n.env.NODE_ENV)!=="production",allowOutsideOfServer:null!=(o=null==e?void 0:e.allowOutsideOfServer)&&o,errorFormatter:null!=(a=null==e?void 0:e.errorFormatter)?a:W,isServer:null==(l=null==e?void 0:e.isServer)||l,$types:null});if(!(null==(i=null==e?void 0:e.isServer)||i)&&(null==e?void 0:e.allowOutsideOfServer)!==!0)throw Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:s,procedure:tg({meta:null==e?void 0:e.defaultMeta}),middleware:function(e){return function e(t){return{_middlewares:t,unstable_pipe:r=>e([...t,..."_middlewares"in r?r._middlewares:[r]])}}([e])},router:ei(s),mergeRouters:ec,createCallerFactory:es()}}}().create(),tP=tT.router,tj=tT.procedure,tA=process.env.INTERNAL_API_URL||"http://localhost:8083",tN=tP({getProviders:tj.query(async()=>{let e=await fetch(`${tA}/providers`);if(!e.ok)throw Error("Failed to fetch providers");return e.json()}),getRegions:tj.input(td.object({provider:td.string()})).query(async({input:e})=>{let t=await fetch(`${tA}/regions?provider=${e.provider}`);if(!t.ok)throw Error("Failed to fetch regions");return t.json()}),getResourceTypes:tj.input(td.object({provider:td.string(),region:td.string(),query:td.string()})).query(async({input:e})=>{let t=`${tA}/resources?provider=${e.provider}&region=${encodeURIComponent(e.region)}&q=${encodeURIComponent(e.query)}`,r=await fetch(t);if(!r.ok)throw Error("Failed to fetch resources");return r.json()}),getResourceOptions:tj.input(td.object({provider:td.string(),region:td.string(),resourceType:td.string()})).query(async({input:e})=>{let t=`${tA}/resource-options?provider=${e.provider}&region=${encodeURIComponent(e.region)}&resourceType=${encodeURIComponent(e.resourceType)}`,r=await fetch(t);if(!r.ok)throw console.error("Failed to fetch resource options:",await r.text()),Error("Failed to fetch resource options");return r.json()}),calculate:tj.input(td.array(td.object({provider:td.string(),region:td.string(),resourceType:td.string(),priceModel:td.string(),unitOfMeasure:td.string(),usageQuantity:td.number(),count:td.number()}))).mutation(async({input:e})=>{let t=e.map(e=>({provider:e.provider,region:e.region,resourceType:e.resourceType,priceModel:e.priceModel,unitOfMeasure:e.unitOfMeasure,quantity:e.usageQuantity*e.count})),r=await fetch(`${tA}/calculate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({services:t})});if(!r.ok)throw Error("Calculation failed");return r.json()})}),tD=e=>tc({endpoint:"/api/trpc",req:e,router:tN,createContext:()=>({})});var tI=e.i(62307);let tM=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/trpc/[trpc]/route",pathname:"/api/trpc/[trpc]",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/trpc/[trpc]/route.ts",nextConfigOutput:"standalone",userland:tI}),{workAsyncStorage:tU,workUnitAsyncStorage:tC,serverHooks:tk}=tM;function tq(){return(0,l.patchFetch)({workAsyncStorage:tU,workUnitAsyncStorage:tC})}async function tL(e,t,r){var n;let o="/api/trpc/[trpc]/route";o=o.replace(/\/index$/,"")||"/";let l=await tM.prepare(e,t,{srcPage:o,multiZoneDraftMode:!1});if(!l)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:_,params:b,nextConfig:g,isDraftMode:O,prerenderManifest:R,routerServerContext:x,isOnDemandRevalidate:S,revalidateOnlyGenerated:T,resolvedPathname:P}=l,j=(0,s.normalizeAppPath)(o),A=!!(R.dynamicRoutes[j]||R.routes[P]);if(A&&!O){let e=!!R.routes[P],t=R.dynamicRoutes[j];if(t&&!1===t.fallback&&!e)throw new E.NoFallbackError}let N=null;!A||tM.isDev||O||(N="/index"===(N=P)?"/":N);let D=!0===tM.isDev||!A,I=A&&!D,M=e.method||"GET",U=(0,u.getTracer)(),C=U.getActiveScopeSpan(),k={params:b,prerenderManifest:R,renderOpts:{experimental:{cacheComponents:!!g.experimental.cacheComponents,authInterrupts:!!g.experimental.authInterrupts},supportsDynamicResponse:D,incrementalCache:(0,i.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(n=g.experimental)?void 0:n.cacheLife,isRevalidate:I,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>tM.onRequestError(e,t,n,x)},sharedContext:{buildId:_}},q=new c.NodeNextRequest(e),L=new c.NodeNextResponse(t),$=d.NextRequestAdapter.fromNodeNextRequest(q,(0,d.signalFromNodeResponse)(t));try{let n=async r=>tM.handle($,k).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=U.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=n.get("next.route");if(o){let e=`${M} ${o}`;r.setAttributes({"next.route":o,"http.route":o,"next.span_name":e}),r.updateName(e)}else r.updateName(`${M} ${e.url}`)}),l=async l=>{var u,s;let c=async({previousCacheEntry:a})=>{try{if(!(0,i.getRequestMeta)(e,"minimalMode")&&S&&T&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await n(l);e.fetchMetrics=k.renderOpts.fetchMetrics;let u=k.renderOpts.pendingWaitUntil;u&&r.waitUntil&&(r.waitUntil(u),u=void 0);let s=k.renderOpts.collectedTags;if(!A)return await (0,y.sendResponse)(q,L,o,k.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,h.toNodeOutgoingHttpHeaders)(o.headers);s&&(t[v.NEXT_CACHE_TAGS_HEADER]=s),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==k.renderOpts.collectedRevalidate&&!(k.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&k.renderOpts.collectedRevalidate,n=void 0===k.renderOpts.collectedExpire||k.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:k.renderOpts.collectedExpire;return{value:{kind:w.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==a?void 0:a.isStale)&&await tM.onRequestError(e,t,{routerKind:"App Router",routePath:o,routeType:"route",revalidateReason:(0,f.getRevalidateReason)({isRevalidate:I,isOnDemandRevalidate:S})},x),t}},d=await tM.handleResponse({req:e,nextConfig:g,cacheKey:N,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:R,isRoutePPREnabled:!1,isOnDemandRevalidate:S,revalidateOnlyGenerated:T,responseGenerator:c,waitUntil:r.waitUntil});if(!A)return null;if((null==d||null==(u=d.value)?void 0:u.kind)!==w.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(s=d.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,i.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",S?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),O&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,h.fromNodeOutgoingHttpHeaders)(d.value.headers);return(0,i.getRequestMeta)(e,"minimalMode")&&A||p.delete(v.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,m.getCacheControlHeader)(d.cacheControl)),await (0,y.sendResponse)(q,L,new Response(d.value.body,{headers:p,status:d.value.status||200})),null};C?await l(C):await U.withPropagatedContext(e.headers,()=>U.trace(p.BaseServerSpan.handleRequest,{spanName:`${M} ${e.url}`,kind:u.SpanKind.SERVER,attributes:{"http.method":M,"http.target":e.url}},l))}catch(t){if(t instanceof E.NoFallbackError||await tM.onRequestError(e,t,{routerKind:"App Router",routePath:j,routeType:"route",revalidateReason:(0,f.getRevalidateReason)({isRevalidate:I,isOnDemandRevalidate:S})}),A)throw t;return await (0,y.sendResponse)(q,L,new Response(null,{status:500})),null}}}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_aa22b09c.js.map